language: r
r:
- release
- oldrel
dist: bionic

warnings_are_errors: true
latex: false
cache: packages
r_packages:
- pkgdown
- hexSticker
- showtext
- rsvg
- here
- covr
addons:
  apt:
    packages:
    - libmagick++-dev
    - libharfbuzz-dev
    - libfribidi-dev

after_success:
  - Rscript -e 'library(covr); codecov()'

notifications:
  email:
    recipients:
    - andrew@exegetic.biz
    on_success: change
    on_failure: change
before_deploy:
# This will build the pkgdown site from README.md.
#
# To get README.md from README.Rmd you need to run another step first which does:
#
# devtools::install()
# rmarkdown::render("README.Rmd")
#
# but it doesn't make sense to do this in Travis.
#
- Rscript inst/hex/logo.R
- Rscript -e 'pkgdown::build_favicons()'
- Rscript -e 'pkgdown::build_site()'
deploy:
  provider: pages
  github_token: "$GITHUB_TOKEN"
  skip_cleanup: true
  on:
    branch: master
    condition: $TRAVIS_R_VERSION_STRING = release
  local_dir: docs
  target_branch: gh-pages

# These are the environment variables:
#
# TRUNDLER_KEY
# RAPIDAPI_KEY
# TRAVIS_KEY
# DB_HOST
# DB_DATABASE
# DB_SCHEMA
# DB_USER
# DB_PASSWD
# NOT_CRAN (which should be set to "true")
#
# How to add environment variables: https://docs.travis-ci.com/user/environment-variables/.
env:
  global:
  - secure: tsyccD9QpjIUp7NtWdow3W1D8rdV693rfottV8bspVW/hyviw5R8gmy+c/mdSGfzNN7RGyH/sMFGJMiF56zeFsVlKptLPYRE3rHRc8Gwv80F27Un2lnYHZApKSGIUT7bgZPXUtOd5QYWrE/u84wkqyJhyvDKGx8SzMSpL7dcrgkXuQzD4suAFBufBk1msMQx3p4bhBZZsrDFpWTu8pQbfYhP9ysZRyY8YaMxLSdaE2V5/UTg/i+64cMDs+a7kcj7It6sQNAVpVb9KrrCQ6+q/Hhdi9foMvGxSKtEPVGKkLZuQQGE8pIsWm9ZrOyAdWdzrfumsdiYo8DEKDNM+MQFrAjAUL5cxrarKIUjDjninSF2sKgelwT4laZlOAoova5WxVZUwFPWigiZo/fFGgVqlimL8CaJzwtxp1Nq7Tb2I4FSilnJJYpbSCsn/vmX2H6vpE0EEMGrqdPrlcM28cgmO1/OzsFR02W/K/dJis1er6baIBdi0pJmrCv+wbvZDmO2wj0RUgLfpTqUDkdYBcLGrOVOqEKXfbw99V0BIgbxNCacydEquubmntZvBb73sQZiPmvF7FKwgBpILGm0LXp+IzwXgFv3Jr0ztVfOug/HQbhsaIdZwmpEgr8XdCmzqz68plg0jGR26o6FY0mhWsLkSwhzat+Mg9AiSuUC+DNoaa8=
  - secure: il5YewoajZ4srpcc/0RXTrzttcvKbzKfm/55Vy6twGuF9uufvSU/8hVG8OXkcF/knRHPsxIfJVfyy7ZMX0lWfU1Q9LuGa0K4mPZzIoelClwgQumZnYtn9C4H5iwQ9C/TMxVn7AdKROIatJcTrjK1iZJuuSPG4x716iRko9itmX9/l/O9utqk9sb3kIOZDfcE1U1DUWBM/1ODZcfMNRgbqiWX8wDJpp4qg/EUYvFOgq0UwXQ6R4s6Kl3dk7yh4VXoyRgHx+Nd/WyxRmctNTmDwUus+bwgue3Ic0BOBCw1Pn8TEK7lR7V9ocEwU36smkrgkpOEkYXTr6FCYeoMWESIGdEB7CbI5wyMsAXnj/Q63Pw+/uXzBlwFscjoMR7aFwdox+8EUFcSS3VP4R7BenHX4H0tx+G1KEONHZTkv1okRN7nNzFy8poiihvnvXOBUxRQo6v+a2AAXilzm2zKhR+koD+uX4ytBTpDVZLc5yKRxFdEV6p/Hy2Ct0aUZA/K2mcJiHUjcJYBOHq1UpU5eaQ6ciKkaBjLVTn270v5CVElpuSiCrGCLuhraqPogif3gZZB5i6NkDBH0Ev+c1RP8vcQrGvYsl0rvO8RyRZbRAmzCqN0QDVPeEobYJ1FiDC22uZszEqNZGjJ4BQ6G2xzFb65LNvN+ZuaIpLzdQNdw6mSEkw=
  - secure: ZxsR96t57DY7M+bQfthnBvoGP35SzTIekHkYpbCoM6zVKyw393OnsiDXl9mHxdKAAOuz3HL2KkGpwgOnXQ++iy5d+4qTE1sCdwiFPfSMKfuWfkhFZqOKcUhKUKnqL/D35b4jn7KySgbDafHQgOBbr+Ng9iiLhaT4y1TyFPbYzv2C7tyTec9eXBbyDY8IxSFeJ/R/WwbNoScIZeeQEHqT4wDTs+dmoqbf0T2ZVNzRGb+GOyu5/QUTx17OQ7Lj5Y75vnzAeKuCPNk6VLLRshfThXmfFbFS6UtZpqV13GXnNkNzaZA18edPa/64mQ9tGAcvNxuaX7oHOsWSobQYFvP6tdsB9dIIvDywhlZRGwS/y6+FUc1cgNZsixOk8I4vqXAZNSHdWJMGquYT/TEtDy1sG/44oSaEoSlYxEZ4tpONGKdlSUjXwmrzF6ACBSwUsC9kdEAP4a22prPgIhC0LTX2ghgE2sLTcvZgUsV0ofWB+85dDBfJiXCj0BTYbQuhXk+DXvSmVZkaplD1au0HTrApYerBnFYWqAglkzdoCJM99dJHRry2y6VNxolF7ZUhstFtAn5Z6cayYAq2fI2MlI71nzQ6cZF8dCugFnGhF+3xyRNRG8TY6hyU1iYj4SDhfBs2AOaMKSDgFAQEH6yROh8fX1MI+hwzwakjQpi23dugQmE=
  - secure: fxgY8z+KOyxnfTGLBL4HFoYNJxHFNG1PSlWliibP5OvBW9p1M4uMlWo+/We2F9GCBMDOIGobB+FjLY+C3/7+LM6G9+oykpMFJf9UDLfJAiVVo3H0j5kKOCYewXgwwPACejpDq5+ZUgPr92TrAHFx2MZ6EIceFUZw2wPjPhrqPDHfuaGz8XaeAThCHONOLVldfNbVBGfp56Foqd+Tt2rkY7yPKja78ToWi3UAA8b7wRnmwhNKz427IvOMytiqghORInpILymlwmffHIDxF1zycsQjHv4n03e9bV3BOfJknBxClplGG89QIQxfR1yepDUs8/Z5bs6mUZyO9mFW54NDUSdxd8bgY0GyLdVoS16l649soATpxdTxZzUtB7zrpwek4jL/Cn/msZfq/vzDpXwZYkIjsykgeAz+0/QiP+08il81GqWZ1zJrFPbZyV+nSH0Tacw4Rm4UYyCvLw5zsl2PqUB9qG/VseIVm7oullFRSQrvAziakXApn6TlZqvMtq1Z8wnhC7Ro5MgjxADdFOFize6SpIxeVrja8kGVzncsjmraVJ0M8XSXXmmyOTGeEaxUuk76RjQ8MqZ+17DS0F01TmioQtbvM6cosllJUNQ10/PswY9gx6g5GUUK5VIuGfGTVsYm2tSNcaA5Wx12GgYlTac150WyFdSDsjxIvjo8Rvw=
  - secure: NiBfvJ/F+G+L7d9DB5tiBMyeMRG2qnj1FowU6JJmC2R6Se1CW8VndlJ5/DYW7nE+dOxMzo9MWx9xmmHAlVg/xzFJ2AuUhhYriGiQ/QSNX3G5t87o2rIB4bJKoJSL6tyiwhf/yYaWSAOhyZ2D9OeoXPPJkZdOhcU4RI/8HYs93FbRAcsj5hnwIWYPeakuRUsM0/9ICz7kNc7Y4DRU5zUl1nt7uelalxNoYcHVRL74gIiPoUbqd6SO7MQnCb2ZIw2i+aCrVa03LRQoK7c0XEz7SHMiAqvpCD+GIp3v5aSBhUgdJi0NpicGXxRihWfjuXNyGgQtb8lFZDRdgSVK8JSEMvZais2iiYkuJ+pxmG2GOuqO0RSfKNQZiJd6WIsv9PaeGEPAiQfF1L4QOp1CydBe+/ea+OncQSGDgBFOdRMOU8VVrfyyNXzU+gRKBvig7SfH3HuSeN0ny3HUbYSp7LxYVaCeTGEF4I4EB8THYfBsIBG2A+xwDB1Buo0bC744JVyl7NCRUReRBFW+q//reBesYdiRaKywFToJU5e63WWdhFNf7D6+sxa+tDqOAqToVB5PREUKQAPLzf/lY4bie0k15932c0c5YG/BbVjfCZ6nmVlx9j3ui9UQwCe3ZX5QgmQiWJHclTzkASQ7Np+il6wuH7zpVZNE6Isx9L6m5bVoi34=
  - secure: J+sv6901jYsUg+m3GzD675j1ca6PkIfj4ntHPSUvfG735bQH4r0it++EzYZ278dDOYDnOoLuaF6lvQi8gdrmO6LId1pNuXuO3be6AKUHbBZP2HF5g+Hzljzs04q4DPUz6/3UMThjM1qZf1tdcpgyNbP7u9iY4yoMNEkDBVu6JEmf7H0PcoxXuzi7j/cV1gZ6vQtmnP5ZjsQXOOPav27qKSUNTfRmpru6xGZ0JKOGEf1r3mhOhunedeXsl3dps6p8HiBhV/e00JZSdvJVkOe3XsC2GAxbW1Lb7qkrE02UJJG4z1urMFHBxIj7H2Vdu+d3SsFndlziTFZmGm+tDX0+RqpUPsvmCCkASunrHAKYBlscYk14R48/rl0heshFWAxAcgX9i5Gc6q3yZvuk7w+GiLgXMCqnXpMqV589YUml1h4r7Y1GOYAQ8YO4p1Bi9lttqSEoZXJYZ11t0xbsdUw6SETCwUZFMtDw5TvYWJ16fZWxs6etOBqcQNxzABAIgmxR2z0mwT7mzZJSkpppjh20k4eW/FR1typTUVsItq0eKuMN+ZxA6MHRIDEjEc/Zqg4h+CilHMHuSCH/0V5qjxS2opdGXdk5elZCh/GZg7FU8IAdrH1ijJlnUvmRYjBq5VwWpxZgzPFTyPO9OARpJ+aC+nX8m93s3hZFJWPnbD7lWf8=
  - secure: ZjzKWQ5MkFsLDz+Ap/HICUx4vsBCoqONhs6Xwav9Frh0gn5UIrt2rRbecBZLVXvjD7QmtXAePav7QNMl2yJ5xvBTIAKUu017TAUWJN5/QyD6o9TAFuH4elbJOn6JkyS7AK18onMOlTUd4PjAgd3afAFRLboeU81Rs+bKdkWkx/EBhV/XQbVlnNcKLPDIMfk0E6vZgbstw/tpaJL72U65Gjfi/TS4+vTF1YQn0BpwHHS3oUrZPs406gC/rTdQ1kbK6hVHiTN5diwUzkxLSJp4YXruNLuVxER184t8BR0wwSgyfr//Os1V/4gEkcbAQBghd6rim+9qz7UfYc6wY2ftz5VtJCxn5MQrcdfan+xrUyi5dz5TGmMh3bvueRZ4uLHwSwppwIdyrxnYgQqTX+TIYlK5I4TaBfbO1xeSz6rtpIJ2clcqoGtbmxooygPK2jh7VafB8p/DgIdiqC0e95ZhjDhmWLO/8nT8RnkOdphzj/PWRfPQDMPJJX4TLCD1Q0txzQkcqigSO1rr5idKikSAEDcOz48or/MwOVgRff4L3Y7TEPOA0R0m9EW0aFplvqT3UiWtmzs4b1eNvd7zhWXBjjNsDD8xaLt00xpvEuMhxnPNL5/Wal+wPCbRr69mi33zM9VOtiytThJgQbHnsrVOfGMtYSMpK4nrPIHRMtmcOQA=
  - secure: lgKHj8SY8O4NfFIfKk+UEzM8J1oxUjblP9T6vMNDmK/aZCK8JrzdIJzOWeiQZjF4YWE/G4jWbABAxw4+xoBH4WpXO+nGonv811/MwL2OctH5VTXYCpKo5Pf9XpH6awKaniAlz4qonv/IGq8qh7SbW8+qnyTNlo1Mk2vuV+HQPijOvqb+XfGlpG823VO5UZfOqUN7w4ZYqrCFapy6+dI2fJd2HY3EAV7EKAbVucmBqYwdff1yNZ9Xhqi1v8zlXJuEnGeoO81iKy0i3L0Wm+wS/p0tUvtHzr5KZp5p8R4mnSWGy3dsja33CbF37CcuKnC6PEmnnBPQLEECIskyG8dGDsqZbjPwMRjLTzpReZColuxkz4K/q5unIEkkspaGtGobvROvCUuTb/Sf8QsBmvFgiNuQlOyl9IWxtBiDjX2Fws9sPHGMJ205lr+C+ScomIa2d2AR9XK+ERH8/3UDwGUT0dYr5gQnzgoznXeN9SAkUuKaA40mUtocmuC8dQWhdVtw2n1pUJMkLuGNEFpXN3V6HqVWZoN9WQp8xZubW2w5s2/ymOVKs4QFyxMbNfvkzLyROX7CaFc5Q7TkrOsT4/qbdtq4MBkT6eFBenJCrpoKV6Z8FTDW/ySMJEv94JyMiAZj2wZ4XO9xSAzk4SKXkoN2epU2borWYWONsphqNUFXiyw=
  - secure: JZc/pI7xdJekmBeq9+FAZySrNVfHg46RvkTzgSeLjiSaQfokn8oN1TULQzfe48DgAeE/4sCZ0Iuf/ONroyH1/4zLUSJts/wdB2OLxd/KbJyoQJCGIYhH3xoo1vo3+y8Ut3dBxKEg91Dw7SFJb6zf78EO/SV81UaUBnGdtyHLepjcng6QmlYt2nt11FFvnvjj1MgW1Ad20D0AbIZykJRUOnxxhN1sRCo0Kd0NCG0Y1N1ePSpyH+SRnISoJVrSXO5I9UySdsXCBeJIZCciLMHDDHP0Y1yzJTLOycXOsOe1F/TE94roAUUxTKtemly/ovHptZ8x3is3/HPyPmopx++LgqOamK8OgOm2movDpc4rB05D29N/2ZYV2HNQfFVG3SXi28zjRMdp0lu8O/7FHwLS2u0cVlSm9etJP1QRRaHdiqLlvEdmFKfqbNALpJhmZ6FL0eZwb77PYXyCmkSC548vRxxsBk0193diko3cPG5Y/1CLMqVshnN1p7LosvXvU1MgQeJrluVh0tzUZfZTojdxNwTpLK/+avlWx+A7hf6hmLVJeAIpqUHw/1IAWf2/PTvii7QYpjNKpDQONHFliLj8nIVQAHSgdGpp3NJAy9cJiWuyOOTtsuh6AJ+a+UH240NvuDHjewi7OBNXNo7g+qoa6Hyz0Ov39QGLNGURxCdBdc4=
  - secure: UehDxoJc3aP60J44CjZ4MzhdYtalBRdy1TDmvAa1hOwYKvItgCfLt5Adx8P42ulZHmGiQniy53iymgrtTMM9z2pYGS6ojfaO0h6goPRDRVRgaKr3OOul4JKiVI/G12dvAIfIV/k0z2C09amWPoVes6Giqofh3Ss9HkHvuwEEpMhis4LWsjR0oNiYeAKfMqgusgLktyM/L0vSzhCTPEgcSf9+LdZ1ZHz7o7SPp1J5CGztJUXp44MdnPqa8GodV4hft73/jEA9o+nFfqDTYr+uJVxzOId4hlyy/RSFARxC6dF2wmK4imrME8JyeEih0ceT4Ab8l422q4rLF8004O5m4HBINEKY6Szq9Yffdm8XF4RY71ocM60GwkbbPwQvHsUewa3PaxImncFuvhAQDYZxX0M4Rqargo07j/pObPmw948fzqhsX4uA1wEUnWkB+kNERNDHQLQC9PxwBN9z6AF9/cWU/a9OYvIyCOvlx+AnU2DZHqRJTsdlw4nvL27+KchNep5WI2ErA6umjzObYiZlvorFSAftgmsf5hZ4phW1uyingV7DgdyPSn2tRgW+xEdkozPbetjBHOnnOhxb6AuT+ojO+BDbBnRg0eHsQ8//FvXS/2M73ARBI5eGYSLxBkhBs7nqzmu+gIsw/Gw99qzEsqJm/ivQ2gVyrrtB9lqapmA=
